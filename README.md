# HomeWorkSQLTextAndWindowFunc
 Домашнее задание по теме "Транзакции и уровни изоляции" (ProductStar)

# Постановка задачи
1.  Моделирование банковских транзакций с использованием различных уровней изоляции транзакций.

- Шаг 1. Создание базы данных и таблиц
-- Создайте базу данных BankTransactionsDB с таблицами Accounts: AccountID (int, primary key), AccountNumber (varchar), Balance (decimal); Transactions: TransactionID (int, primary key), AccountID (int, foreign key to Accounts), TransactionType (varchar, 'Deposit' or 'Withdrawal'), Amount (decimal), TransactionDate (datetime)

- Шаг 2. Написание SQL-запросов

-- Напишите SQL-запросы для проведения транзакций по изменению баланса в таблице Accounts и добавлению записей в таблицу Transactions. Используйте различные значения для Amount и TransactionType

-- Примеры транзакций:

-- Транзакция 1:  Депозит на счет №1. Увеличьте баланс на счете №1 на 500. Добавьте запись в таблицу Transactions с типом "Deposit" и суммой 500 для счета №1.

-- Транзакция 2: Снятие средств со счета №2. Уменьшите баланс на счете №2 на 300. Добавьте запись в таблицу Transactions с типом "Withdrawal" и суммой 300 для счета №2. Примечание: Каждая транзакция должна быть отдельным SQL-запросом. Используйте значения, которые актуальны для ваших начальных данных в таблице Accounts. 

- Шаг 3: Уровни Изоляции и Анализ Результатов

-- READ UNCOMMITTED: Откройте два соединения с базой данных, одно для чтения, другое для записи. В одном соединении начните транзакцию с уровнем READ UNCOMMITTED и выполните чтение данных о балансе счета. В другом соединении выполните транзакцию по изменению баланса (например, снятие денег). Попробуйте выполнить запрос на чтение данных из первого соединения. Какие данные видны?

-- READ COMMITTED: Проведите тот же эксперимент, но с уровнем READ COMMITTED. Какие изменения вы заметили?

-- REPEATABLE READ: Проведите эксперимент с уровнем REPEATABLE READ. Попробуйте изменить баланс в одной транзакции и выполнить запрос на чтение в другой. Как изменения отразятся на результатах?

- Шаг 4: Анализ Результатов и Выводы

-- Сделайте выводы о том, как изменение уровня изоляции влияет на одновременный доступ к банковским счетам и транзакциям. Обсудите, какие уровни изоляции могут быть предпочтительными в банковских системах, учитывая требования к целостности данных. Опишите стратегии управления конфликтами и блокировками, которые могли бы быть использованы в реальной банковской системе.

2.  Отправить ссылку на готовый шаблон, инструмент/аккаунт.

3.  Домашнее задание можно реализовывать в терминале PostgreSQL или IDE (например Data Grip).
## Используемое ПО 
- БД PostgreSQL 15.12
- IDE pgadmin4 8.4
## Описание основных файлов
- sql/create_DB.sql - скрипт создания БД BankTransactionsDB
- sql/create_table.sql - скрипт создания основных требуемых таблиц и ключей
- sql/insert_init_accounts.sql - очистка данных, сброс счётчиков автоинкремента и добавление двух тестовых акаунтов
- sql/transaction1.sql - скрипт первой транзакции из задания
- sql/transaction2.sql - скрипт второй транзакции из задания
- sql/create_table_texts.sql - Скрипт создания таблицы
- sql/insert_into_texts.sql - Скрипт заполнения таблицы тестовыми данными
- sql/selects_diff_isol_level.sql - Скрипт для отработки запросов при разных уровнях изоляции

